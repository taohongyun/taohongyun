### app与web

相同点

1. app和web使用的后端服务器都是相同的
2. 前端都是使用http协议来进行交互的（也有部分app使用socket来交互）

不同点

1. app为C/S架构 (Client/Server) ，web是B/S架构，(Browser/Server)
2.  app前后端交互的数据格式为json格式为主，web前后端交互的数据格式为html为主

JSON(JavaScript Object Notation)是一种轻量级的数据交换格式，采用完全独立于编程语言的文本格式来储存和表示数据，JSON最常用的格式为键值对。

### app客户端的应用架构

客户端程序，应用服务器，数据库

### app项目环境(后端)

- 开发环境：指开发人员开发时调试所使用的环境
- 测试环境：指测试人员执行测试，回归缺陷时使用
- 预发布环境：一般连接生产环境的数据库，使用生产环境的数据来进行测试
- 生产环境：指正式提供对外服务所使用的环境，产品实际用户使用的环境

预发布环境的目的是测试最新的代码，对于线上复杂数据的处理情况

注意：

​	预发布环境里只针对基本的业务进行测试

​	测试写的业务操作时，只能使用自己构造的数据

​	升级涉及到表结构发生变更时，可以将生产环境的数据备份到测试库中，升级并测试。

```
灰度发布
灰度发布是一种发布策略，在预发布环境以后，生产环境以前，一般会进行灰度测试
灰度发布，因为一个项目，一般线上部署时有多台机器(客户端服务器)运行，所以灰度(新代码)部署1台或者3台，将少部分请求分发给灰度服务器，其它大部分请求还是分发给执行旧代码的服务器，检测新功能，如果失败就只需要回滚几台，如果没问题，就选一个流量小的时间，将所有的请求都分发到执行新代码的灰度服务器上，然后对执行旧代码的服务器进行升级。
注意点：
	灰度机器不易太多
	灰度时间一般为一周到一个月
	灰度发布时，不能影响用户的使用
```

### app项目环境(前端)

app开发完成后，相应的开发人员会打出应用程序包，由测试人员安装测试

- 安卓 apk测试包
- ios  ipa测试包

#### 应用内测分发平台

蒲公英，fir.im

#### 应用线上发布平台

安卓：豌豆荚、应用宝等

苹果：app store 、itools 

##### 流程

​	apk/ipa测试完成

​	提交应用市场审核

​	添加渠道号

​	渠道包设置

​	正式上线

### 敏捷开发

- 敏捷开发模型以用户的需求进化为核心，采用迭代，循序渐进的方法进行软件开发
- 将项目切分为多个子项目，每个子项目单独发布，保证软件较早可用。及时收集用户反馈，调整未发布的项目，满足用户的实际需要。

### Scrum

scrum是一个敏捷开发框架，是一个增量的，迭代的开发过程。

#### scrum的三种角色

Product owner  产品负责人

```
收集需求，并转化为产品功能列表，并进行优先级排序
```

Scrum Master  项目经理

```
保证项目稳定运行，排除干扰
```

Dev Team  开发团队

```
规模(一般5到9人)
成员：程序员、测试员、用户体验设计师、
主要职责：满足用户需求
```

### 敏捷开发流程

1. 产品负责人收集需求，转化为产品功能列表
2. 启动迭代计划会，评审产品功能列表，挑选优先级高的需求作为迭代任务
3. 项目组成员完成迭代任务的开发，测试工作
4. 迭代结束后，开评审会，评估当前迭代任务的完成的情况
5. 开反思会，总结迭代过程中做的好的与不好的地方
6. 下一代迭代，循环2-5

### app应用测试(一次迭代)

参与需求评审

指定测试计划(包括测试方案)：

​	测试的原则、人员分工、时间安排、测试环境、风险评估   测试的方法、工具、设计等

设计编写测试用例

执行用例，跟踪缺陷

​	版本测试报告：覆盖的功能模块、测试用例的覆盖率、缺陷统计/遗留缺陷情况、是否允许上线



### 熟悉项目(学车不app)

- 了解项目的作用  

  是一款手机学车软件

- 了解项目的用户及角色  

  学车的学员

- 了解项目的功能架构  

  按照app的页面tab来划分

  在每个tab里边，再根据功能点进行细分

- 了解项目的技术架构

注意：前三个必须知道，后一个可以作为了解



### app测试要点

对于app项目的测试，一般是进行系统测试

包括：

1. 功能测试
2. 兼容性测试
3. 安装、卸载、升级测试
4. 交叉事件测试：比如视频播放被用户来电干扰
5. push(消息推送)测试
6. 性能测试：cpu、内存、流量测试、电量测试、流畅度测试、启动速度
7. 用户体验测试
8. 稳定性测试

### 业务功能测试

#### 显性需求

根据软件说明，设计文档或者用户需求验证app的各个功能的实现

#### 隐性需求

相关业务：功能影响到的相关业务

其他角度：分支流程，逆向操作，异常操作

补充精简：测试策略，业务知识，测试经验



### 兼容性测试

#### 关注点

- 手机信号：覆盖市场主流机型（线上用户机型排名）

- 系统版本：安卓4.4版本以上的（4.4、5.1、6.0、7.0）  ios9.x以上（9.x、10.x、11.x、12.x）

- 屏幕尺寸、分辨率：分辨率：1080x1920、720x1280  尺寸：5.5 4.7

- 网络：2G,3G,4G,5G,WIFI

- 应用兼容性：

  1.与手机硬件的兼容：home键、电源键、音量调节等

  2.与外部硬件的兼容：耳机、蓝牙等

  3.与操作系统软件的兼容：wlan设置、系统时间调节、定位等

  4.与其他app之间的兼容：音频冲突





### 流量研究院 

线上排名：

  <https://tongji.baidu.com/research/app?source=index> 



### 安装卸载升级测试

#### 安装测试

正常场景：

- 环境：在不同操作系统版本上安装
- 渠道：从不同的安装渠道进行安装（app商城、手机助手、直接下载文件安装（apk,ipa）
- 不同的安装路径（手机或者sd卡上）

异常场景;

- 安装时出现异常（关机、断网），恢复后能否继续安装
- 安装时储存空间不足
- 安装时手动取消在安装
- 正在运行时覆盖安装
- 低版本覆盖安装高版本
- 卸载后安装



#### 卸载测试

正常卸载（手动卸载、工具卸载）

运行时卸载

取消卸载

卸载异常中断

卸载后无数据残留



#### 升级测试

从临近版本升级

跨版本升级

不同渠道升级

升级成功提醒

应用升级时非WiFi提醒



### 交叉事件测试

又叫冲突测试或干扰测试

指一个功能正在运行，另一个操作对该功能的影响测试

#### 关注点

模拟用户场景

1. app运行时接电话
2. app运行时收发短信
3. app运行时查看应用推送
4. app运行时连接蓝牙设备
5. app运行时接收文件弹窗提醒
6. app运行时旋转屏幕
7. app运行时切换网络（4G、5G、wifi）
8. app运行时使用相机，计算器等软件
9. app运行时出现电量警告，插拔充电器的情况

### push消息测试

#### 原理

pull客户端主动获取，客户端定时向服务器获取消息，如果有则发送到客户端。基于短连接。

push客户端被动接受，当服务器有更新消息时，主动发送到客户端。基于长连接。

#### 对比

push更节省资源

#### push推送消息的实质

应用服务器有更新信息-->应用app-->用户

#### push消息的测试点

1. push消息是否按指定业务规则发送
2. 当push消息是针对特定用户时，检查收到push消息与用户身份是否相符
3. 设置不接受推送消息时，用户是否收到push消息
4. 设置push消息显示的位置，是否与配置一致
5. 收到push消息时，是否能正常打开
6. app前台使用时，收到push消息如何提示
7. app后台运行时，收到push消息如何提示
8. app离线，是否能收到push消息

### 性能测试

内存

CPU

流量

电量

启动速度

流畅度

### 测试工具GT

- 基础测试：手机整机或者手机上安装的任何一个app的CPU、内存、网络流量、流畅度/帧数、电量等基础性能指标的实时展示，历史数据采集及excel格式储存、曲线绘制等
- 日志查看：app的logcat日志查看，便于直接用手机现场定位APP功能异常，crash.
- 网络数据抓包：直接用手机抓包保存成pcap文件，下载到pc端后用wireshark查看

### CPU介绍

在linux系统下，CPU利用率分为用户态、系统态、空闲态

用户态：指CPU处于应用程序的执行时间

系统态：标识系统内核的执行时间

空闲态：表示空闲系统进程执行的时间

CPU使用率：CPU执行非系统空闲进程时间（用户态+系统态）/CPU总的执行时间（用户态+系统态+空闲态）

#### jiffies

表示自开机以来，应用程序消耗的CPU时间片的总数

关注点

cpu使用长时间处于90%以上

手机发热、耗电增加

反应变慢，引起ank3



mnt -- shared -- others 

### 内存测试

private dirty 私有内存

​	进程（应用）独占内存，也就是进程销毁时可以回收的内存容量

pss 实际使用内存（私有内存+共享内存）

​	将跨进程共享界面页加进来，进行按比例计算pss，这样能够比较准确的表示进程占用的实际物理内存



#### 问题点

内存泄漏 memory leak

​	指程序申请内存后，无法释放已申请的内存，多次内存泄露很严重，会占用大量内存。

内存溢出 out of memory

​	程序申请内存后，没有足够的内存供其使用，memory leak 最后也会出现out of memory



#### 原因

程序中实际使用的内存pss持续增长

程序中出现crash(可能是内存溢出)





### 流畅度测试

FPS 即 frames per second 帧数  GPU在每一秒绘制的帧数

问题点

1. 想要大脑觉得动作是连续的，至少每秒10-20帧的速度
2. 想达到流畅的效果，至少每秒24帧
3. 60帧每秒的流畅度是最佳的，我们的目标就是让程序的流畅度能接近60帧每秒



### 流量测试

测试方法

1. 统计测试法

   获取应用程序收发的数据报文，统计出对应的流量

2. 抓包测试法

   利用tcpdump或者fiddler抓包，导出pcap文件，再在wireshark中打开进行分析

流量优化方法

- 数据压缩
- 不同数据格式的采用
- 控制访问的频次
- 只获取必要的数据
- 缓存机制
- 针对不同的网络类型设置不同的访问策略



### 电量测试

就是测试移动设备电量消耗快慢的一种测试方法，一般是用平均电流（电池生产厂家一般都采用mAh来标记电池容量大小，平均电流越小，说明设备使用的时间就越长），来衡量电池的消耗速度

常见的耗电场景

1. 定位，尤其是耗用GPS定位
2. 网络传输，尤其是 非WiFi环境
3. 屏幕亮度
4. CPU频率
5. 内存调度频度
6. wake-locker 时间和次数



### 启动速度测试

app的启动分为冷启动和热启动

冷启动：

​	指app被后台杀死以后，在这个状态下打开app。（后台无该app运行）

冷启动：

​	指app没有被后台杀死，仍然在后台运行。（后台该app在运行）

#### 测试方法：

使用命令adb shell am start -W -n 包名/Activity名 查看app 耗时

该命令获取三个关键指标

ThisTime：表示一连串启动Activity的最后一个Activity启动耗时，一般会<=TotalTime时间

TotalTime：应用的启动时间，包括创建进程，app初始化，Activty初始化到界面（开发者需要优化的耗时）

WaitTime：前一个应用activity pause 的时间+TotalTime



### 用户体验测试

#### 关注点

##### UI界面测试

- 结合UI设计文档，检查每个界面设计菜单，对话框，窗口，风格，布局等

注意：

​	图片、按钮（选中与未选中）、字体大小、颜色、居中对齐等等

##### 易用性测试

- 是否有空数据界面设计，引导用户去执行操作
- 菜单层次是否太深
- 交互流程分支是否太多
- 完成业务操作的步骤是否过多
- 界面中按钮可点击范围是否适中
- 是否定义back的逻辑，设计软硬件交互的时候，back键应该具体定义

##### 横竖屏测试

- 横竖屏的切换是否正常（针对每个界面）
- 特别要关注app中有表格，因为横竖屏显示的宽度不一样

##### 关注手机应用上的其他辅助功能

可以重点关注放大字体、反色、语音转换、多点触等功能



### 稳定性测试

通过长时间对应用程序进行无序操作，检验应用程序是否会出现异常，如闪退crash，无响应ANP等

#### 稳定性测试工具

Monkey

Monkey是一个命令行工具，是由安卓官方提供的

测试人员通过Mankey来模拟用户的触摸、点击、滑动以及系统按键等操作（操作事件都是随机的），从而实现对app压力的测试和稳定性测试。

开发人员结合monkey打印的日志和系统打印的日志，修改测试中出现的问题

#### 稳定性测试的时机

一般需要等产品稳定了，bug比较少的时候，再用monkey去测试待测应用的稳定性









功能测试

性能测试

​	cpu 内存 运行速度 流量 电量

兼容性测试

交叉事件测试

push消息测试

用户体验测试

​	UI界面 易用性 横竖屏测试

稳定性测试

